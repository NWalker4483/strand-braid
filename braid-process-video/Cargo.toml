[package]
name = "braid-process-video"
version = "0.11.1" # braid release synchronized
edition = "2021"
rust-version = "1.60"
description = "process videos within the Braid multi-camera framework"

[dependencies]
# apt install libavformat-dev libavfilter-dev libavdevice-dev libavresample-dev libvpx-dev
log = "0.4"
env_logger = "0.8"
ffmpeg-next = {version="4.4", optional=true}
anyhow = "1"
chrono = {version="0.4", features=["serde"]}
serde = {version="1", features=["derive"]}
toml = "0.5"
machine-vision-formats = "0.1.1"
clap = {version="3", features=["derive"]}
resvg = "0.19"
tagger = "4.0"
tiny-skia = "0.6.1"
usvg = { version = "0.19.0", default-features = false }
image = {version="0.23", default-features=false, features=["png"]}
base64 = "0.6"
ordered-float = "1"
regex = "1"

mkv-writer = {path="../mkv-writer"}
ci2-remote-control = { path = "../ci2-remote-control"}
braidz-parser = {path="../braidz-parser"}
flydra-types = {path="../flydra-types"}
convert-image = { path = "../convert-image" }
datetime-conversion = {path="../datetime-conversion"}
basic-frame = {path="../basic-frame", features=["convert-image"]}
fmf = {path="../fmf"}
timestamped-frame = {path="../timestamped-frame"}

[features]
vpx = ["mkv-writer/vpx"]
read-mkv = ["ffmpeg-next"]
backtrace = ["anyhow/backtrace", "mkv-writer/backtrace",
    "convert-image/backtrace", "braidz-parser/backtrace",
    "fmf/backtrace",
    ]

[dev-dependencies]
download-verify = {path="../download-verify"}
serde_json = "1"
